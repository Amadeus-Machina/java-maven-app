stages:
 - release
 - build

release:
  stage: release
  image: maven:3.6.3-jdk-11
  script:
    -  git clone https://root:glpat-FUxW549x1jebmawpsa9B@gitlab.com/yassermagdy430/java-maven-app.git
    -  cd ./$CI_PROJECT_NAME
    -  git config user.name root
    -  git config user.email yassermagdy430@gmail.com
    -  echo $CI_COMMIT_MESSAGE
    #- mvn release:prepare
    - |
      if [[ CI_COMMIT_MESSAGE == *"bugfix"* ]]
      then
        mvn release:prepare
      elif [[ CI_COMMIT_MESSAGE == *"feature"* ]]
      then
        #mvn release:prepare -DincrementMinorVersion=true
        mvn release:prepare -DincrementalRelease=true
      else
        mvn release:prepare
      fi