pipeline {
    agent any
    environment{
        new_version="1.3.8"
        server_credentials=credentials=credentials('Server-credentials')
    }
    stages {
        stage('build') {
            steps {
                echo 'building the application'
                echo "building the application_version ${NEW_VERSION}"

            }
        }
        stage('test') {
            steps {
                echo 'testing   the application'
            }
        }
        stage('deploy') {
            steps {
                echo 'deploying    the application'
                withCredentials([usernamePassword(credentials: 'server_credentials', usernameVariable: 'USERNAME', passwordVariable: 'PWD')])
                {
                  sh  "some scripting  ${USER} ${PWD}"
//                   echo USERNAME
//                   echo "username is $USERNAME"
                }

            }
        }
    }
}
